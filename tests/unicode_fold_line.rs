use anyhow::Result;
use vcard4::Vcard;

const EXPECTED: &str = "BEGIN:VCARD\r\nVERSION:4.0\r\nFN:12345678901234567890123456789012345678901234567890123456789012345678901\r\n รถ123456789012345678901234567890123456789012345678901234567890123456789012\r\n 34567890123456789012345678901234567890123456789012345678901234567890123456\r\n 78901234567890123456789012345678901234567890123456789012345678901234567890\r\n 123456789012345678901234567890123456789012345678901234567890\r\nEND:VCARD\r\n";

#[test]
fn unicode_fold_line() -> Result<()> {
    let line70 = "1234567890".repeat(7);
    let line76 = format!("{line70}1รถ{line70}{line70}{line70}{line70}");
    let mut card: Vcard = Default::default();
    card.formatted_name = vec![line76.into()];
    let result = card.to_string();
    assert_eq!(result, EXPECTED);
    Ok(())
}
